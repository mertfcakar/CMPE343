<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="com.group12.greengrocer.controllers.CustomerController"
    prefWidth="960" prefHeight="540" style="-fx-background-color: #f5f5f5;">

    <!-- TOP: Header with username and title -->
    <top>
        <VBox style="-fx-background-color: #2e7d32; -fx-padding: 15;">
            <HBox alignment="CENTER_LEFT" spacing="20">
                <Label text="Group12 GreenGrocer"
                    style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;" />
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="usernameLabel" text="Welcome, Customer"
                    style="-fx-text-fill: white; -fx-font-size: 16px;" />
                <Button text="Logout" onAction="#handleLogout"
                    style="-fx-background-color: #c62828; -fx-text-fill: white;" />
            </HBox>
        </VBox>
    </top>

    <!-- CENTER: Main content area -->
    <center>
        <BorderPane>

            <!-- LEFT: Navigation menu -->
            <left>
                <VBox spacing="10"
                    style="-fx-background-color: white; -fx-padding: 15; -fx-border-color: #e0e0e0; -fx-border-width: 0 1 0 0;"
                    prefWidth="200">
                    <Label text="MENU"
                        style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #666;" />
                    <Separator />

                    <Button text="Browse Products" onAction="#handleBrowseProducts"
                        maxWidth="Infinity"
                        style="-fx-background-color: #4caf50; -fx-text-fill: white;" />
                    <Button text="Shopping Cart" onAction="#handleViewCart" maxWidth="Infinity"
                        style="-fx-background-color: #2196f3; -fx-text-fill: white;" />
                    <Button text="My Orders" onAction="#handleViewOrders" maxWidth="Infinity" />
                    <Button text="My Deliveries" onAction="#handleViewDeliveries"
                        maxWidth="Infinity" />
                    <Button text="Message Owner" onAction="#handleSendMessage" maxWidth="Infinity" />
                    <Button text="Edit Profile" onAction="#handleEditProfile" maxWidth="Infinity" />

                    <Region VBox.vgrow="ALWAYS" />

                    <Separator />
                    <Label fx:id="cartItemsLabel" text="Cart: 0 items" style="-fx-font-size: 12px;" />
                </VBox>
            </left>

            <!-- CENTER: Content area with products -->
            <center>
                <VBox spacing="10" style="-fx-padding: 15;">

                    <!-- Search bar -->
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Search:" style="-fx-font-weight: bold;" />
                        <TextField fx:id="searchField" promptText="Search products..."
                            prefWidth="300" onKeyReleased="#handleSearch" />
                        <Button text="Clear" onAction="#handleClearSearch" />
                    </HBox>

                    <!-- Products display area -->
                    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                        style="-fx-background-color: transparent;">
                        <VBox spacing="15" style="-fx-padding: 10;">

                            <!-- Vegetables Section -->
                            <TitledPane text="ðŸ¥¬ VEGETABLES" expanded="true" animated="false">
                                <ScrollPane fitToWidth="true" prefHeight="250">
                                    <GridPane fx:id="vegetablesGrid" hgap="15" vgap="15"
                                        style="-fx-padding: 10;">
                                        <!-- Products will be added dynamically -->
                                    </GridPane>
                                </ScrollPane>
                            </TitledPane>

                            <!-- Fruits Section -->
                            <TitledPane text="ðŸŽ FRUITS" expanded="true" animated="false">
                                <ScrollPane fitToWidth="true" prefHeight="250">
                                    <GridPane fx:id="fruitsGrid" hgap="15" vgap="15"
                                        style="-fx-padding: 10;">
                                        <!-- Products will be added dynamically -->
                                    </GridPane>
                                </ScrollPane>
                            </TitledPane>

                        </VBox>
                    </ScrollPane>

                </VBox>
            </center>

        </BorderPane>
    </center>

    <!-- BOTTOM: Status bar -->
    <bottom>
        <HBox spacing="10" alignment="CENTER_LEFT"
            style="-fx-background-color: #e0e0e0; -fx-padding: 10;">
            <Label fx:id="statusLabel" text="Ready" style="-fx-font-size: 12px;" />
        </HBox>
    </bottom>

</BorderPane>